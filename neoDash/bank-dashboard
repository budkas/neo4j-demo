{
  "title": "ABC Bank",
  "version": "2.2",
  "settings": {
    "pagenumber": 0,
    "editable": true,
    "fullscreenEnabled": true,
    "parameters": {
      "undefined": ""
    },
    "resizing": "all"
  },
  "pages": [
    {
      "title": "Main Page",
      "reports": [
        {
          "title": "Account Holders",
          "query": "MATCH(a:AccHolder)\nRETURN count(a) as numAccHolders",
          "width": 2,
          "height": 1,
          "x": 0,
          "y": 0,
          "type": "value",
          "selection": {},
          "settings": {
            "textAlign": "center",
            "verticalAlign": "middle",
            "backgroundColor": "white",
            "color": "green"
          }
        },
        {
          "title": "Total Transfers",
          "query": "MATCH (a:BankAccount)-[:SEND]->(trf:BankTransfer)\nRETURN round(sum(trf.amount)/1000000,2) + ' Mn'",
          "width": 2,
          "height": 1,
          "x": 0,
          "y": 2,
          "type": "value",
          "selection": {},
          "settings": {
            "layerType": "markers",
            "textAlign": "center",
            "verticalAlign": "middle",
            "fontSize": 64,
            "color": "orange",
            "backgroundColor": "rgba(255, 255, 191, 0.25)"
          }
        },
        {
          "title": "Bank Accounts",
          "query": "MATCH(b:BankAccount)\nRETURN COUNT(b)\n\n\n",
          "width": 2,
          "height": 1,
          "x": 2,
          "y": 0,
          "type": "value",
          "selection": {},
          "settings": {
            "textAlign": "center",
            "verticalAlign": "middle",
            "color": "green"
          }
        },
        {
          "title": "# Transfers",
          "query": "MATCH(bt:BankTransfer)\nRETURN count(bt)\n\n\n",
          "width": 2,
          "height": 1,
          "x": 0,
          "y": 1,
          "type": "value",
          "selection": {},
          "settings": {
            "textAlign": "center",
            "verticalAlign": "middle",
            "fontSize": 64,
            "color": "blue",
            "backgroundColor": "rgba(255, 255, 191, 0.25)"
          }
        },
        {
          "title": "# Purchases",
          "query": "MATCH(p:Purchase)\nRETURN COUNT(p)\n\n\n",
          "width": 2,
          "height": 1,
          "x": 0,
          "y": 3,
          "type": "value",
          "selection": {},
          "settings": {
            "textAlign": "center",
            "verticalAlign": "middle",
            "color": "blue",
            "backgroundColor": "rgba(240, 251, 255, 0.86)"
          }
        },
        {
          "title": "Distribution of Transfers",
          "query": "MATCH (c:Country)<-[:CITIZEN_OF]-(ah:AccHolder)-[]-(:BankAccount)-[:SEND]->(trf:BankTransfer)\nRETURN c.code, sum(trf.amount) AS amount\n\n",
          "width": 4,
          "height": 2,
          "x": 2,
          "y": 1,
          "type": "choropleth",
          "selection": {
            "index": "c.code",
            "value": "amount",
            "key": "(none)"
          },
          "settings": {
            "backgroundColor": "rgba(255, 255, 191, 0.25)"
          }
        },
        {
          "title": "Distribution of Purchases",
          "query": "MATCH (c:Country)<-[:CITIZEN_OF]-(ah:AccHolder)-[:HAS_CREDITCARD]-(:CreditCard)<-[:WITH_CARD]-(p:Purchase)\nRETURN c.code, sum(p.amount) AS amount\n\n\n",
          "width": 4,
          "height": 2,
          "x": 2,
          "y": 3,
          "type": "choropleth",
          "selection": {
            "index": "c.code",
            "value": "amount",
            "key": "(none)"
          },
          "settings": {
            "nodePositions": {},
            "backgroundColor": "rgba(240, 251, 255, 0.86)"
          }
        },
        {
          "title": "Total Purchases",
          "query": "MATCH (cc:CreditCard)<-[:WITH_CARD]-(p:Purchase)\nRETURN round(sum(p.amount)/1000000,2) + ' Mn'\n\n\n",
          "width": 2,
          "height": 1,
          "x": 0,
          "y": 4,
          "type": "value",
          "selection": {},
          "settings": {
            "nodePositions": {},
            "textAlign": "center",
            "verticalAlign": "middle",
            "fontSize": 64,
            "color": "orange",
            "backgroundColor": "rgba(240, 251, 255, 0.86)"
          }
        },
        {
          "title": "Merchants",
          "query": "MATCH(m:Merchant)\nRETURN COUNT(m)\n\n\n\n",
          "width": 2,
          "height": 1,
          "x": 4,
          "y": 0,
          "type": "value",
          "selection": {},
          "settings": {
            "nodePositions": {},
            "textAlign": "center",
            "verticalAlign": "middle",
            "color": "purple"
          }
        }
      ]
    },
    {
      "title": "Anti-Money Laundering",
      "reports": [
        {
          "title": "Layering",
          "query": "WITH date('2021-06-30') as curDate\nWITH curDate, curDate-duration({days:30}) as curDate30\nMATCH p=(ah1:AccHolder)-[:HAS_BANKACCOUNT]->(ba1:BankAccount)-[:SEND]->(trf1:BankTransfer)-[:SEND]->(ba2:BankAccount)-[:SEND]->(trf2:BankTransfer)-[:SEND]->(ba3:BankAccount)<-[:HAS_BANKACCOUNT]-(ah2:AccHolder)\nWHERE trf1.transferDate <= curDate\n    AND trf1.transferDate >= curDate30\n    AND trf2.transferDate >= trf1.transferDate\n    AND duration.inDays(trf1.transferDate, trf2.transferDate).days <=7\n    AND trf2.amount > trf1.amount * 0.75\n    AND trf2.amount < trf1.amount\n    AND trf1.amount > 1000\nRETURN p\n\n\n",
          "width": 4,
          "height": 2,
          "x": 0,
          "y": 0,
          "type": "graph",
          "selection": {
            "AccHolder": "name",
            "BankAccount": "accNum",
            "BankTransfer": "amount"
          },
          "settings": {
            "nodePositions": {
              "7": [
                8.54944206536039,
                -1.4378413122910252
              ],
              "11": [
                -249.97145679831902,
                -94.07318272690773
              ],
              "12": [
                -1.8411152149213725,
                8.739485688201023
              ],
              "13": [
                2.116633634987789,
                -9.88800660219231
              ],
              "16": [
                113.64035992376034,
                77.53620422121206
              ],
              "17": [
                -266.6971523880358,
                174.70881522257866
              ],
              "18": [
                105.53767260227033,
                73.25639302573838
              ],
              "20": [
                15.681384985529421,
                17.1731238409161
              ],
              "24": [
                -71.86685232621508,
                252.3280609685086
              ],
              "28": [
                -32.76762744342305,
                -200.1468327606972
              ],
              "38": [
                22.347492001801537,
                -1.3339962298481556
              ],
              "42": [
                -40.57960890879024,
                18.24043542784095
              ],
              "46": [
                -2.991671611607617,
                29.161165358618955
              ],
              "50": [
                -117.83439456337577,
                96.7364099321317
              ],
              "58": [
                -9.143891893335907,
                -27.661712578426382
              ],
              "60": [
                36.69899654848627,
                13.514368427339322
              ],
              "62": [
                155.0552750776204,
                -299.77894114941085
              ],
              "64": [
                188.15956953401735,
                268.6747873526794
              ],
              "67": [
                -8.8740989416206,
                5.146440851946911
              ],
              "71": [
                174.78408374210628,
                -153.28244073350902
              ],
              "80": [
                18.235548404553995,
                -35.58352769027169
              ],
              "84": [
                -124.8103914963301,
                -212.18239758213252
              ],
              "88": [
                312.8589802185783,
                86.46387420131207
              ],
              "128": [
                -6.351479169966829,
                12.678944428315848
              ],
              "145": [
                152.95695989539894,
                56.02448853085061
              ],
              "150": [
                4.564929331975396,
                113.61179663459458
              ],
              "162": [
                -28.410944539819727,
                -18.1471405297255
              ],
              "165": [
                -215.39084018347174,
                -69.28434388431926
              ],
              "166": [
                -69.17413965668428,
                -30.923323013190505
              ],
              "191": [
                41.57514820866019,
                -3.028787731369177
              ],
              "194": [
                84.26466379318256,
                93.99861094561807
              ],
              "195": [
                46.2160579932112,
                8.672395746162262
              ],
              "197": [
                -18.771484222483586,
                31.874639918054182
              ],
              "200": [
                -245.15839372384747,
                150.16696090210687
              ],
              "201": [
                -65.34948681672057,
                58.375542746311226
              ],
              "203": [
                -6.320082935834513,
                -34.36317611775143
              ],
              "206": [
                -172.5778115116447,
                188.3062217041416
              ],
              "207": [
                -10.711916987484141,
                -29.125777776269917
              ],
              "224": [
                189.46021285854226,
                -1.9094903610701834
              ],
              "237": [
                35.5489788771738,
                33.271521868280466
              ],
              "240": [
                -101.73514070628256,
                235.46608436962902
              ],
              "241": [
                12.115985977497985,
                63.40993573916431
              ],
              "243": [
                -37.173212308261824,
                -0.3662647844879394
              ],
              "246": [
                -158.63588340884021,
                -166.0370880421427
              ],
              "247": [
                -37.87064961937198,
                -2.8650923972254065
              ],
              "259": [
                25.751490226661666,
                4.356016980300826
              ],
              "262": [
                -66.66036675580338,
                -194.12128498400472
              ],
              "263": [
                22.35366530351937,
                -59.31403776212104
              ],
              "270": [
                -290.47738225385433,
                -73.46875816536395
              ],
              "334": [
                3.0493851005236148,
                46.27871709365935
              ],
              "337": [
                -53.42004791962465,
                -12.314983949357627
              ],
              "338": [
                -6.4088357289864675,
                47.61712130238084
              ],
              "350": [
                -24.27564237521275,
                -29.656257960638293
              ],
              "353": [
                -83.39699645718339,
                -88.79920965499169
              ],
              "354": [
                -26.78944020622784,
                -27.230420728919363
              ],
              "360": [
                46.11550655204267,
                10.060390563425672
              ],
              "363": [
                2.4795683333062066,
                108.66436201880978
              ],
              "364": [
                37.058060475585414,
                10.117483601443059
              ],
              "373": [
                -60.84502786530804,
                -17.360234047571343
              ],
              "377": [
                -40.703167350592146,
                26.683745921032447
              ],
              "380": [
                -83.6128593021066,
                103.32535604094313
              ],
              "381": [
                -52.2118230061375,
                34.05984633684132
              ],
              "424": [
                99.84875744106104,
                102.57648182503095
              ],
              "440": [
                19.25829479942142,
                -52.265734160992636
              ],
              "443": [
                170.30407654202594,
                -270.66674551279
              ],
              "444": [
                39.03906853119359,
                -93.53948374640221
              ],
              "452": [
                30.48084933878997,
                49.14497364963887
              ],
              "455": [
                214.97160840663042,
                248.7338708395022
              ],
              "456": [
                53.37615490953388,
                86.68735862925413
              ],
              "457": [
                -36.44415456678536,
                -19.019298024314388
              ],
              "460": [
                150.1840292885737,
                -201.26082810377338
              ],
              "461": [
                -37.68677093315538,
                -19.13525457312744
              ],
              "487": [
                -20.797018380785502,
                31.943241946451757
              ],
              "488": [
                48.44325875187775,
                -23.389192880258143
              ],
              "491": [
                153.66412747124215,
                -179.8963025743009
              ],
              "492": [
                65.13340235703312,
                -44.798378773131276
              ],
              "502": [
                -8.77499759353088,
                47.654050766730904
              ],
              "505": [
                249.98584801679652,
                176.32079555761257
              ],
              "506": [
                -10.695038979952557,
                46.747841553638345
              ],
              "549": [
                -12.70128320639462,
                -56.820182756912004
              ],
              "552": [
                -120.97114162084026,
                -175.2376987750152
              ],
              "553": [
                -36.3645391556589,
                -80.17479558272416
              ],
              "567": [
                34.353271455882954,
                -11.688022651740962
              ],
              "570": [
                283.9331546855317,
                103.19494422083162
              ],
              "571": [
                91.71433666878858,
                30.202735324744797
              ],
              "641": [
                75.69748930040083,
                -40.22938464916892
              ],
              "644": [
                -53.32080644527916,
                14.52195074000795
              ],
              "645": [
                -208.57470151124122,
                164.84076608599491
              ],
              "646": [
                17.50908153707943,
                27.70673316170045
              ],
              "647": [
                10.917508005329168,
                -160.7692524753869
              ],
              "648": [
                -56.7833686454273,
                13.887732133044851
              ],
              "654": [
                177.27075917313581,
                -22.944806869463374
              ],
              "658": [
                -88.026195965591,
                84.03576617842225
              ],
              "672": [
                110.51290662557585,
                -69.6427655836191
              ],
              "680": [
                40.69364947333827,
                36.3984826672422
              ],
              "692": [
                -148.00952355351384,
                26.07642311396484
              ],
              "694": [
                41.57978938918766,
                -31.356162113466375
              ],
              "701": [
                -202.62262522978745,
                -188.96222689655048
              ],
              "714": [
                -152.70935353231232,
                -124.61693842341049
              ],
              "718": [
                60.467546133542044,
                5.632919041757355
              ],
              "754": [
                31.312691485067937,
                -41.899579968081646
              ],
              "755": [
                -107.2143421853244,
                -178.6404112997822
              ],
              "758": [
                26.27454076350062,
                -47.85333463256779
              ],
              "771": [
                16.054347345745587,
                54.31906158980628
              ],
              "772": [
                -67.92425377301015,
                -48.710593509086564
              ],
              "775": [
                10.614422744540386,
                51.89441183164642
              ],
              "776": [
                -38.649575787771525,
                -32.241239715547806
              ],
              "777": [
                -41.63558787087812,
                108.43801681510811
              ],
              "780": [
                -42.744863790491436,
                -28.695976277768203
              ],
              "791": [
                61.31213993334303,
                -9.058547068724824
              ],
              "792": [
                165.72195654683864,
                -234.51291323464258
              ],
              "795": [
                53.529633933747604,
                -8.75022736876176
              ],
              "796": [
                -64.01452993396703,
                1.08711533151941
              ],
              "825": [
                -66.78016987212443,
                -131.12728409766908
              ],
              "831": [
                26.940680884401704,
                44.75727029563273
              ],
              "837": [
                59.73942243071046,
                -112.36489704059173
              ],
              "850": [
                -33.146271143758916,
                41.79738483800054
              ],
              "851": [
                -136.45318005223191,
                212.99429735007814
              ],
              "854": [
                -38.81555261440351,
                44.40370362749541
              ],
              "871": [
                61.79761340788607,
                -22.999267020883103
              ],
              "877": [
                -14.860341783222266,
                55.83724068297613
              ],
              "893": [
                -8.704151620908753,
                -123.09585056450257
              ],
              "896": [
                3.6262878318005454,
                -63.639670849881014
              ],
              "897": [
                124.23218458660432,
                -211.09456251779423
              ],
              "900": [
                2.9161754759497187,
                -62.579981859122704
              ],
              "968": [
                52.85145259224709,
                22.98653170180226
              ],
              "984": [
                -86.42906152075824,
                -72.35842481932745
              ],
              "994": [
                38.436242778857604,
                -115.39555646298903
              ],
              "999": [
                52.29146228746574,
                52.077848205774416
              ],
              "1000": [
                234.00619606735887,
                214.46322603394003
              ],
              "1003": [
                45.88100946044095,
                50.529676444461536
              ],
              "1011": [
                18.689026297656156,
                66.70528233714303
              ],
              "1050": [
                -65.8152343833709,
                -6.2850096329649565
              ],
              "1051": [
                -201.61507342051863,
                -148.54751410316297
              ],
              "1054": [
                -68.46327739336388,
                -6.112174749930224
              ],
              "1074": [
                -165.29936301819055,
                -20.880217733538974
              ],
              "1086": [
                156.7022917850611,
                8.924299693572387
              ],
              "1091": [
                -261.2969046637566,
                10.79127702060369
              ],
              "1113": [
                52.79392891017476,
                -34.9442021195371
              ],
              "1114": [
                265.62905838793756,
                137.88812790483
              ],
              "1117": [
                54.725091309093116,
                -25.50800454921447
              ],
              "1122": [
                -255.82076065601075,
                -154.10114177742076
              ],
              "1136": [
                44.77615090124952,
                47.014309834687644
              ],
              "1183": [
                -112.00616549212519,
                -106.14797657305803
              ],
              "1201": [
                88.97024677216751,
                -109.65820576765506
              ],
              "1372": [
                -0.5031316400748675,
                61.41918705117133
              ],
              "1373": [
                45.30747245226994,
                103.67079112389818
              ],
              "1376": [
                -5.004368775305352,
                59.45310033703898
              ],
              "1609": [
                -36.40907207065452,
                -63.98947660681477
              ],
              "1610": [
                -100.37371550796348,
                -131.55387422633743
              ],
              "1613": [
                -50.577557726443075,
                -106.96944005037156
              ]
            },
            "defaultNodeSize": 8,
            "frozen": true
          }
        },
        {
          "title": "Aggregators",
          "query": "WITH date('2021-06-30') as curDate\nWITH curDate, curDate-duration({days:30}) as curDate30\nMATCH (ah:AccHolder)-[:HAS_BANKACCOUNT]->(recAcc:BankAccount)<-[:SEND]-(trf:BankTransfer)\nWHERE trf.transferDate >= curDate30\nAND trf.transferDate <= curDate\nWITH recAcc.accNum as accountNumber,\n\tmin(trf.transferDate) as StartDate,\n\tmax(trf.transferDate) as EndDate,\n\tduration.inDays(min(trf.transferDate),max(trf.transferDate)).days as NumDays,\n\tcount(trf.amount) as NumDeposits,\n\tsum(trf.amount) as TotalDeposits\nWHERE TotalDeposits > 10000\nWITH collect({accNum: accountNumber,\n\t\t\t\tstartDate: StartDate,\n\t\t\t\tendDate: EndDate,\n\t\t\t\tnumDays: NumDays,\n\t\t\t\tnumDeposits: NumDeposits,\n\t\t\t\ttotDeposits: TotalDeposits}) as aggregators\n\t\t\t\t\n// find all the rapid outgoing transfers of high percentage of incoming transfers\nUNWIND aggregators as curAgg\nMATCH (ba:BankAccount)-[:SEND]->(trf:BankTransfer)\nWHERE ba.accNum = curAgg.accNum\nAND trf.transferDate >= curAgg.startDate\nAND trf.transferDate <= curAgg.endDate+duration({days:10})\nWITH ba.accNum as accountNumber,\n\tcurAgg.startDate as StartDate,\n\tmax(trf.transferDate) as EndDate,\n\tduration.inDays(curAgg.startDate,max(trf.transferDate)).days as NumDays,\n\tcurAgg.numDeposits as NumDeposits,\n\tcurAgg.totDeposits as TotalDeposits,\n\tcount(trf.amount) as NumWithdrawals,\n\tsum(trf.amount) as TotalWithdrawals,\n\tabs(sum(trf.amount))/curAgg.totDeposits as pctWithdrawal\nWHERE pctWithdrawal > 0.75 AND pctWithdrawal <= 1.0\n\nMATCH p = (ah:AccHolder)-[:HAS_BANKACCOUNT]->(ba:BankAccount)-[:SEND]->(:BankTransfer)-[:SEND]->(:BankAccount)\nWHERE ba.accNum = accountNumber\nRETURN p",
          "width": 4,
          "height": 2,
          "x": 4,
          "y": 0,
          "type": "graph",
          "selection": {
            "AccHolder": "name",
            "BankAccount": "accNum",
            "BankTransfer": "amount"
          },
          "settings": {
            "nodePositions": {
              "7": [
                8.54944206536039,
                -1.4378413122910252
              ],
              "11": [
                -249.97145679831902,
                -94.07318272690773
              ],
              "12": [
                -1.8411152149213725,
                8.739485688201023
              ],
              "13": [
                2.116633634987789,
                -9.88800660219231
              ],
              "16": [
                113.64035992376034,
                77.53620422121206
              ],
              "17": [
                -266.6971523880358,
                174.70881522257866
              ],
              "20": [
                15.681384985529421,
                17.1731238409161
              ],
              "24": [
                -71.86685232621508,
                252.3280609685086
              ],
              "28": [
                -32.76762744342305,
                -200.1468327606972
              ],
              "38": [
                22.347492001801537,
                -1.3339962298481556
              ],
              "42": [
                -40.57960890879024,
                18.24043542784095
              ],
              "46": [
                -2.991671611607617,
                29.161165358618955
              ],
              "50": [
                -117.83439456337577,
                96.7364099321317
              ],
              "58": [
                -9.143891893335907,
                -27.661712578426382
              ],
              "60": [
                36.69899654848627,
                13.514368427339322
              ],
              "62": [
                155.0552750776204,
                -299.77894114941085
              ],
              "64": [
                188.15956953401735,
                268.6747873526794
              ],
              "67": [
                -8.8740989416206,
                5.146440851946911
              ],
              "71": [
                174.78408374210628,
                -153.28244073350902
              ],
              "80": [
                18.235548404553995,
                -35.58352769027169
              ],
              "84": [
                -124.8103914963301,
                -212.18239758213252
              ],
              "88": [
                312.8589802185783,
                86.46387420131207
              ],
              "162": [
                -28.410944539819727,
                -18.1471405297255
              ],
              "165": [
                -234.8862806397768,
                -124.35896317338107
              ],
              "191": [
                41.57514820866019,
                -3.028787731369177
              ],
              "194": [
                84.26466379318256,
                93.99861094561807
              ],
              "197": [
                -18.771484222483586,
                31.874639918054182
              ],
              "200": [
                -245.15839372384747,
                150.16696090210687
              ],
              "203": [
                -6.320082935834513,
                -34.36317611775143
              ],
              "206": [
                -172.5778115116447,
                188.3062217041416
              ],
              "237": [
                35.5489788771738,
                33.271521868280466
              ],
              "240": [
                -101.73514070628256,
                235.46608436962902
              ],
              "243": [
                -37.173212308261824,
                -0.3662647844879394
              ],
              "246": [
                -158.63588340884021,
                -166.0370880421427
              ],
              "259": [
                25.751490226661666,
                4.356016980300826
              ],
              "262": [
                -66.66036675580338,
                -194.12128498400472
              ],
              "334": [
                3.0493851005236148,
                46.27871709365935
              ],
              "337": [
                -53.42004791962465,
                -12.314983949357627
              ],
              "350": [
                -24.27564237521275,
                -29.656257960638293
              ],
              "353": [
                -83.39699645718339,
                -88.79920965499169
              ],
              "360": [
                46.11550655204267,
                10.060390563425672
              ],
              "363": [
                2.4795683333062066,
                108.66436201880978
              ],
              "377": [
                -40.703167350592146,
                26.683745921032447
              ],
              "380": [
                -83.6128593021066,
                103.32535604094313
              ],
              "440": [
                19.25829479942142,
                -52.265734160992636
              ],
              "443": [
                170.30407654202594,
                -270.66674551279
              ],
              "452": [
                30.48084933878997,
                49.14497364963887
              ],
              "455": [
                214.97160840663042,
                248.7338708395022
              ],
              "457": [
                -36.44415456678536,
                -19.019298024314388
              ],
              "460": [
                150.1840292885737,
                -201.26082810377338
              ],
              "488": [
                48.44325875187775,
                -23.389192880258143
              ],
              "491": [
                153.66412747124215,
                -179.8963025743009
              ],
              "502": [
                -8.77499759353088,
                47.654050766730904
              ],
              "505": [
                249.98584801679652,
                176.32079555761257
              ],
              "549": [
                -12.70128320639462,
                -56.820182756912004
              ],
              "552": [
                -120.97114162084026,
                -175.2376987750152
              ],
              "567": [
                34.353271455882954,
                -11.688022651740962
              ],
              "570": [
                283.9331546855317,
                103.19494422083162
              ],
              "644": [
                -53.32080644527916,
                14.52195074000795
              ],
              "645": [
                -208.57470151124122,
                164.84076608599491
              ],
              "754": [
                31.312691485067937,
                -41.899579968081646
              ],
              "755": [
                -107.2143421853244,
                -178.6404112997822
              ],
              "771": [
                16.054347345745587,
                54.31906158980628
              ],
              "772": [
                -67.92425377301015,
                -48.710593509086564
              ],
              "776": [
                -38.649575787771525,
                -32.241239715547806
              ],
              "777": [
                -41.63558787087812,
                108.43801681510811
              ],
              "791": [
                61.31213993334303,
                -9.058547068724824
              ],
              "792": [
                165.72195654683864,
                -234.51291323464258
              ],
              "850": [
                -33.146271143758916,
                41.79738483800054
              ],
              "851": [
                -136.45318005223191,
                212.99429735007814
              ],
              "896": [
                3.6262878318005454,
                -63.639670849881014
              ],
              "897": [
                124.23218458660432,
                -211.09456251779423
              ],
              "999": [
                52.29146228746574,
                52.077848205774416
              ],
              "1000": [
                234.00619606735887,
                214.46322603394003
              ],
              "1050": [
                -65.8152343833709,
                -6.2850096329649565
              ],
              "1051": [
                -201.61507342051863,
                -148.54751410316297
              ],
              "1113": [
                52.79392891017476,
                -34.9442021195371
              ],
              "1114": [
                265.62905838793756,
                137.88812790483
              ],
              "1372": [
                -0.5031316400748675,
                61.41918705117133
              ],
              "1373": [
                45.30747245226994,
                103.67079112389818
              ],
              "1609": [
                -36.40907207065452,
                -63.98947660681477
              ],
              "1610": [
                -100.37371550796348,
                -131.55387422633743
              ]
            }
          }
        },
        {
          "title": "Foreign Exchange",
          "query": "MATCH(c1:Country)<-[:CITIZEN_OF]-(sender:AccHolder)-[:HAS_BANKACCOUNT]->(fromAcc:BankAccount)-[:SEND]->(trf:BankTransfer)-[:SEND]->(toAcc:BankAccount)<-[:HAS_BANKACCOUNT]-(receiver:AccHolder)-[:CITIZEN_OF]->(c2:Country)\nWHERE c1.name <> c2.name\nWITH c1, c2, sender, receiver\nMATCH (receiver)-[:HAS_BANKACCOUNT]->(:BankAccount)-[:SEND]->(:BankTransfer)-[:SEND]->(:BankAccount)<-[:HAS_BANKACCOUNT]-(newReceiver:AccHolder)-[:CITIZEN_OF]->(c1)\nWITH sender, newReceiver\nMATCH p=(sender)-[:SEND|HAS_BANKACCOUNT|WORKS_AS|HAS_ADDRESS*2..4]-(newReceiver)\nRETURN p\n\n\n",
          "width": 4,
          "height": 2,
          "x": 8,
          "y": 0,
          "type": "graph",
          "selection": {
            "AccHolder": "name",
            "Job": "title",
            "Address": "street",
            "BankAccount": "accNum",
            "BankTransfer": "amount"
          },
          "settings": {
            "nodePositions": {
              "7": [
                8.54944206536039,
                -1.4378413122910252
              ],
              "11": [
                -249.97145679831902,
                -94.07318272690773
              ],
              "12": [
                -1.8411152149213725,
                8.739485688201023
              ],
              "13": [
                2.116633634987789,
                -9.88800660219231
              ],
              "16": [
                113.64035992376034,
                77.53620422121206
              ],
              "17": [
                -266.6971523880358,
                174.70881522257866
              ],
              "20": [
                15.681384985529421,
                17.1731238409161
              ],
              "24": [
                -71.86685232621508,
                252.3280609685086
              ],
              "28": [
                -32.76762744342305,
                -200.1468327606972
              ],
              "38": [
                22.347492001801537,
                -1.3339962298481556
              ],
              "42": [
                -40.57960890879024,
                18.24043542784095
              ],
              "46": [
                -2.991671611607617,
                29.161165358618955
              ],
              "50": [
                -117.83439456337577,
                96.7364099321317
              ],
              "58": [
                -9.143891893335907,
                -27.661712578426382
              ],
              "60": [
                36.69899654848627,
                13.514368427339322
              ],
              "62": [
                155.0552750776204,
                -299.77894114941085
              ],
              "64": [
                188.15956953401735,
                268.6747873526794
              ],
              "67": [
                -8.8740989416206,
                5.146440851946911
              ],
              "71": [
                174.78408374210628,
                -153.28244073350902
              ],
              "80": [
                18.235548404553995,
                -35.58352769027169
              ],
              "84": [
                -124.8103914963301,
                -212.18239758213252
              ],
              "88": [
                312.8589802185783,
                86.46387420131207
              ],
              "162": [
                -28.410944539819727,
                -18.1471405297255
              ],
              "165": [
                -234.8862806397768,
                -124.35896317338107
              ],
              "191": [
                41.57514820866019,
                -3.028787731369177
              ],
              "194": [
                84.26466379318256,
                93.99861094561807
              ],
              "197": [
                -18.771484222483586,
                31.874639918054182
              ],
              "200": [
                -245.15839372384747,
                150.16696090210687
              ],
              "203": [
                -6.320082935834513,
                -34.36317611775143
              ],
              "206": [
                -172.5778115116447,
                188.3062217041416
              ],
              "237": [
                35.5489788771738,
                33.271521868280466
              ],
              "240": [
                -101.73514070628256,
                235.46608436962902
              ],
              "243": [
                -37.173212308261824,
                -0.3662647844879394
              ],
              "246": [
                -158.63588340884021,
                -166.0370880421427
              ],
              "259": [
                25.751490226661666,
                4.356016980300826
              ],
              "262": [
                -66.66036675580338,
                -194.12128498400472
              ],
              "334": [
                3.0493851005236148,
                46.27871709365935
              ],
              "337": [
                -53.42004791962465,
                -12.314983949357627
              ],
              "350": [
                -24.27564237521275,
                -29.656257960638293
              ],
              "353": [
                -83.39699645718339,
                -88.79920965499169
              ],
              "360": [
                46.11550655204267,
                10.060390563425672
              ],
              "363": [
                2.4795683333062066,
                108.66436201880978
              ],
              "377": [
                -40.703167350592146,
                26.683745921032447
              ],
              "380": [
                -83.6128593021066,
                103.32535604094313
              ],
              "440": [
                19.25829479942142,
                -52.265734160992636
              ],
              "443": [
                170.30407654202594,
                -270.66674551279
              ],
              "452": [
                30.48084933878997,
                49.14497364963887
              ],
              "455": [
                214.97160840663042,
                248.7338708395022
              ],
              "457": [
                -36.44415456678536,
                -19.019298024314388
              ],
              "460": [
                150.1840292885737,
                -201.26082810377338
              ],
              "488": [
                48.44325875187775,
                -23.389192880258143
              ],
              "491": [
                153.66412747124215,
                -179.8963025743009
              ],
              "502": [
                -8.77499759353088,
                47.654050766730904
              ],
              "505": [
                249.98584801679652,
                176.32079555761257
              ],
              "549": [
                -12.70128320639462,
                -56.820182756912004
              ],
              "552": [
                -120.97114162084026,
                -175.2376987750152
              ],
              "567": [
                34.353271455882954,
                -11.688022651740962
              ],
              "570": [
                283.9331546855317,
                103.19494422083162
              ],
              "644": [
                -53.32080644527916,
                14.52195074000795
              ],
              "645": [
                -208.57470151124122,
                164.84076608599491
              ],
              "754": [
                31.312691485067937,
                -41.899579968081646
              ],
              "755": [
                -107.2143421853244,
                -178.6404112997822
              ],
              "771": [
                16.054347345745587,
                54.31906158980628
              ],
              "772": [
                -67.92425377301015,
                -48.710593509086564
              ],
              "776": [
                -38.649575787771525,
                -32.241239715547806
              ],
              "777": [
                -41.63558787087812,
                108.43801681510811
              ],
              "791": [
                61.31213993334303,
                -9.058547068724824
              ],
              "792": [
                165.72195654683864,
                -234.51291323464258
              ],
              "850": [
                -33.146271143758916,
                41.79738483800054
              ],
              "851": [
                -136.45318005223191,
                212.99429735007814
              ],
              "896": [
                3.6262878318005454,
                -63.639670849881014
              ],
              "897": [
                124.23218458660432,
                -211.09456251779423
              ],
              "999": [
                52.29146228746574,
                52.077848205774416
              ],
              "1000": [
                234.00619606735887,
                214.46322603394003
              ],
              "1050": [
                -65.8152343833709,
                -6.2850096329649565
              ],
              "1051": [
                -201.61507342051863,
                -148.54751410316297
              ],
              "1113": [
                52.79392891017476,
                -34.9442021195371
              ],
              "1114": [
                265.62905838793756,
                137.88812790483
              ],
              "1372": [
                -0.5031316400748675,
                61.41918705117133
              ],
              "1373": [
                45.30747245226994,
                103.67079112389818
              ],
              "1609": [
                -36.40907207065452,
                -63.98947660681477
              ],
              "1610": [
                -100.37371550796348,
                -131.55387422633743
              ]
            }
          }
        },
        {
          "title": "Money Mules (High-velocity)",
          "query": "MATCH (acc:BankAccount)-[r:SEND]-(:BankTransfer)\nWITH distinct acc, count(r) as cnt\nWHERE cnt > 23\nMATCH path=(acc)<-[:HAS_BANKACCOUNT]-(ah:AccHolder)-[rel*2..4]-(ah2:AccHolder)\nWHERE ALL(r in rel WHERE not(type(r)='CITIZEN_OF') )\nRETURN path\n\n\n",
          "width": 6,
          "height": 2,
          "x": 0,
          "y": 2,
          "type": "graph",
          "selection": {
            "BankAccount": "accNum",
            "AccHolder": "name",
            "Job": "title"
          },
          "settings": {
            "nodePositions": {}
          }
        },
        {
          "title": "High Daily Volumes",
          "query": "WITH date('2021-06-30') as curDate, 180000 as curThreshold\nWITH curThreshold, curDate, curDate-duration({days:30}) as curDate30\nWITH curDate, curDate30, curThreshold\nUNWIND [days IN range(1,duration.between(curDate30,curDate).days) | \n         curDate30 + duration({days:days})] as day\nOPTIONAL MATCH (credit)-[:SEND]->(acc:BankAccount) //inward transfers\nWHERE credit.transferDate = day\nOPTIONAL MATCH (acc)-[:SEND]->(debit) //outward transfers\nWHERE debit.transferDate = day\nWITH acc, day, curThreshold, sum(credit.amount) as credits, sum(debit.amount) as debits\nWHERE credits > curThreshold OR debits > curThreshold\nMATCH path=(acc)<-[:HAS_BANKACCOUNT]-(ah:AccHolder)-[rel*2..4]-(ah2:AccHolder)\nWHERE ALL(r in rel WHERE not(type(r)='CITIZEN_OF') )\nRETURN path\n\n\n",
          "width": 6,
          "height": 2,
          "x": 6,
          "y": 2,
          "type": "graph",
          "selection": {
            "BankAccount": "accNum",
            "AccHolder": "name",
            "Job": "title",
            "Phone": "number",
            "Address": "street"
          },
          "settings": {
            "nodePositions": {}
          }
        }
      ]
    },
    {
      "title": "Recommendations",
      "reports": [
        {
          "title": "RFM",
          "query": "WITH date('2021-06-30') as curDate\nWITH curDate, curDate-duration({days:30}) as curDate30\nMATCH(ah:AccHolder)-[h:HAS_CREDITCARD]->(c:CreditCard)<-[w:WITH_CARD]-(p:Purchase)-[:FROM]->(m:Merchant)\nWHERE p.purchaseDate <= curDate AND p.purchaseDate >= curDate30\nWITh ah,\n    m,\n    SUM(p.amount) as monetory,\n    COUNT(DISTINCT p) as frequency,\n    MIN(\n        duration.inDays(\n            p.purchaseDate, curDate\n        ).days\n    ) AS recency\nWHERE recency < 5 AND monetory > 5000 AND frequency > 2\nWITH ah,m\nMATCH p=(ah)-[:HAS_CREDITCARD]->(:CreditCard)<-[:WITH_CARD]-(:Purchase)-[:FROM]->(m)\nRETURN p\n\n\n\n\n",
          "width": 3,
          "height": 2,
          "x": 0,
          "y": 0,
          "type": "graph",
          "selection": {
            "AccHolder": "name",
            "CreditCard": "cardNum",
            "Purchase": "purchaseDate",
            "Merchant": "name"
          },
          "settings": {
            "nodePositions": {}
          }
        },
        {
          "title": "Top 10 Popular Merchants",
          "query": "MATCH(m:Merchant)<-[:FROM]-(p:Purchase)\nWITH m.name as merchant, count(m) as frequency\nORDER by frequency DESC\nRETURN merchant, frequency\nLIMIT 10\n\n\n\n",
          "width": 3,
          "height": 2,
          "x": 3,
          "y": 0,
          "type": "bar",
          "selection": {
            "index": "merchant",
            "value": "frequency",
            "key": "(none)"
          },
          "settings": {
            "nodePositions": {}
          }
        },
        {
          "title": "Recommendation Engine",
          "query": "WITH date('2021-06-30') as curDate, 'ENEL' as merchantName\nWITH curDate, merchantName, curDate-duration({days:30}) as curDate30\nMATCH(ah:AccHolder)-[h:HAS_CREDITCARD]->(c:CreditCard)<-[w:WITH_CARD]-(p:Purchase)-[:FROM]->(m:Merchant {name:merchantName})\nWHERE p.purchaseDate <= curDate AND p.purchaseDate >= curDate30\nWITh ah,\n    SUM(p.amount) as monetory,\n    COUNT(DISTINCT p) as frequency,\n    MIN(\n        duration.inDays(\n            p.purchaseDate, curDate\n        ).days\n    ) AS recency\nWHERE recency < 5 AND monetory > 5000 AND frequency > 2\nWITH ah\nMATCH (ah)-[:HAS_BANKACCOUNT]->(:BankAccount)-[:SEND]-(:BankTransfer)-[:SEND]-(:BankAccount)<-[:HAS_BANKACCOUNT]-(friend:AccHolder)\nWITH ah as cust, friend as friend, count(friend) as frequency\nWHERE frequency > 0\nRETURN  friend.name as TargetCust",
          "width": 3,
          "height": 2,
          "x": 6,
          "y": 0,
          "type": "table",
          "selection": {},
          "settings": {
            "nodePositions": {},
            "type": "Node Property"
          }
        }
      ]
    }
  ],
  "parameters": {},
  "extensions": {
    "advanced-charts": true,
    "styling": true
  }
}